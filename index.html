<!DOCTYPE html>
<html lang="sk">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="Oficiálna stránka SAILH – Slovenská asociácia in-line hokeja. Live výsledky." />
    <meta name="author" content="SAILH" />
    <title>SAILH - Domov</title>
    <link rel="stylesheet" href="styles.css" />
</head>
<body>
    <header class="header">
        <div class="logo">
            <picture>
                <source srcset="logo_80.webp 1x, logo_160.webp 2x, logo_200.webp 3x" type="image/webp">
                <source srcset="logo_80.png 1x, logo_160.png 2x, logo_200.png 3x" type="image/png">
                <img src="logo_80.png" alt="SAILH Logo" class="logo-img">
            </picture>
        </div>
        <div class="site-title">Slovenská asociácia in-line hokeja</div>
        <nav class="menu" role="navigation" aria-label="Hlavné menu">
            <a href="index.html" class="active">Domov</a>
            <a href="news.html">Novinky</a>
            <a href="gallery.html">Galéria</a>
            <a href="standing.html">Extra liga</a>
            <a href="clubs.html">Kluby</a>
            <a href="partners.html">Partneri</a>
            <a href="donate.html">Darujte 2%</a>
            <a href="https://www.inlineliga.sk">Amatérska liga</a>
            
        </nav>
    </header>

    <div class="video-banner">
        <video autoplay muted loop playsinline class="banner-video">
            <source src="banner.webm" type="video/webm" />
            <source src="banner.mp4" type="video/mp4" />
            Váš prehliadač nepodporuje prehrávanie videa.
        </video>
    </div>

    <div class="layout" style="justify-content: center;">
        <main class="hero main-content" style="max-width: 800px; width: 100%;">
            
            <div class="live-scoreboard-section">
                <h2>Naživo Zápasy</h2>
                <div id="matchList" class="match-container">
                    <p>Načítavam zápasy...</p>
                </div>
            </div>

        </main>
    </div>

    <footer class="footer">
        <div class="footer-grid">
            <div>
                <h4 class="footer-title">SAILH</h4>
                <p class="footer-text">
                    Slovenská asociácia in-line hokeja.<br><br>
                    Oreganová 1178/1<br>
                    900 46 Most pri Bratislave - Studené<br><br>
                    Registračné číslo: VVS/1-900/90-72711
                </p>
            </div>
            <div>
                <h4 class="footer-title">Navigácia</h4>
                <ul class="footer-list">
                    <li><a href="https://ives.minv.sk/rmno/detail/13542098669735168654">O asociácii</a></li>
                    <li><a href="clubs.html">Kluby</a></li>
                    <li><a href="https://www.inlineliga.sk/">Amatérska Liga</a></li>
                    <li><a href="partners.html">Partneri</a></li>
                    <li><a href="media.html">Médiá</a></li>
                    <li><a href="calendar.html">Kalendár</a></li>
                    <li><a href="privacy-policy.html">Ochrana údajov</a></li>
                </ul>
            </div>
            <div>
                <h4 class="footer-title">Kontakt</h4>
                <p class="footer-text"><i class="fas fa-at icon-red"></i> pejchalr@gmail.com</p>
                <p class="footer-text"><i class="fas fa-phone icon-red"></i> +421 905 627 715</p>
                <p class="footer-text"><i class="fas fa-id-card icon-red"></i> IČO: 57133671</p>
                <p class="footer-text"><i class="fas fa-file-alt icon-red"></i> DIČ: 2122632930</p>
            </div>
            <div>
                <h4 class="footer-title">Newsletter</h4>
                <p class="footer-text">Prihláste sa na odber noviniek:</p>
                <input type="email" placeholder="Váš e-mail" class="footer-input">
                <button class="footer-btn">Prihlásiť</button>
            </div>
        </div>
        <div class="footer-bottom">© 2026 SAILH - Všetky práva vyhradené</div>
    </footer>

<script>
        async function loadMatches() {
            try {
                const response = await fetch("https://Lucifer21sk.pythonanywhere.com/matches/public");
                let matches = await response.json();

                matches = matches.filter(m => m.status === "live");

                const container = document.getElementById("matchList");
                container.innerHTML = ""; 

                if (matches.length === 0) {
                    container.innerHTML = "<p>Aktuálne sa nehrajú žiadne zápasy.</p>";
                    return;
                }

                matches.forEach(m => {
                    const statusClass = "status-live";
                    const statusText = "NAŽIVO";
                    
                    let phaseText = m.phase;
                    if(phaseText === "normal") phaseText = "Základná hracia doba";
                    if(phaseText === "overtime") phaseText = "Predĺženie";
                    if(phaseText === "shootout") phaseText = "Nájazdy";

                    // --- TIMELINE (Names Only) ---
                    let eventsHtml = "";
                    if (m.events && m.events.length > 0) {
                        eventsHtml = '<div style="margin-top: 20px; border-top: 1px solid #ddd; padding-top: 10px; display: flex; flex-direction: column; gap: 8px;">';
                        
                        m.events.forEach(e => {
                            let alignStyle = "";
                            let boxStyle = "padding: 6px 12px; border-radius: 6px; font-weight: bold; font-size: 0.95em; display: inline-block; max-width: 80%; box-shadow: 0 1px 2px rgba(0,0,0,0.1);";

                            if (e.side === "home") {
                                // Home Goal -> Left -> Blue
                                alignStyle = "align-self: flex-start; text-align: left;";
                                boxStyle += " background-color: #e3f2fd; color: #1565c0; border-left: 4px solid #1565c0;"; 
                            } else {
                                // Away Goal -> Right -> Red
                                alignStyle = "align-self: flex-end; text-align: right;";
                                boxStyle += " background-color: #fce4ec; color: #c2185b; border-right: 4px solid #c2185b;"; 
                            }

                            // Just the Scorer Name
                            eventsHtml += `
                                <div style="${alignStyle}">
                                    <div style="${boxStyle}">
                                        ${e.scorer}
                                    </div>
                                </div>`;
                        });
                        eventsHtml += '</div>';
                    }
                    // -----------------------------

                    container.innerHTML += `
                        <div class="match-card">
                            <div class="status-badge ${statusClass}">${statusText}</div>
                            <div class="scoreboard-display">
                                <div class="team-name" style="text-align: right;">${m.home_team}</div>
                                <div class="score-numbers">${m.home_score} - ${m.away_score}</div>
                                <div class="team-name" style="text-align: left;">${m.away_team}</div>
                            </div>
                            <div class="match-phase">${phaseText}</div>
                            ${eventsHtml}
                        </div>
                    `;
                });

            } catch (err) {
                console.error("Error loading matches:", err);
                document.getElementById("matchList").innerHTML = "<p>Chyba pri načítaní výsledkov.</p>";
            }
        }

        loadMatches();
        setInterval(loadMatches, 5000); 
    </script>
</body>
</html>