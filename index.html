<!DOCTYPE html>
<html lang="sk">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="Ofici√°lna str√°nka SAILH ‚Äì Slovensk√° asoci√°cia in-line hokeja. Live v√Ωsledky." />
    <meta name="author" content="SAILH" />
    <title>SAILH - Domov</title>
    <link rel="stylesheet" href="styles.css" />
</head>
<body>
    <header class="header">
        <div class="logo">
            <picture>
                <source srcset="logo_80.webp 1x, logo_160.webp 2x, logo_200.webp 3x" type="image/webp">
                <source srcset="logo_80.png 1x, logo_160.png 2x, logo_200.png 3x" type="image/png">
                <img src="logo_80.png" alt="SAILH Logo" class="logo-img">
            </picture>
        </div>
        <div class="site-title">Slovensk√° asoci√°cia in-line hokeja</div>
        <nav class="menu" role="navigation" aria-label="Hlavn√© menu">
            <a href="index.html" class="active">Domov</a>
            <a href="standing.html">Extraliga</a>
            <a href="https://www.inlineliga.sk">Amat√©rska liga</a>
            <a href="clubs.html">Kluby</a>
            <a href="https://www.mihwa.org/">MIHWA</a>
            <a href="gallery.html">Gal√©ria</a>            
            <a href="partners.html">Partneri</a>              
        </nav>
    </header>

    <div class="video-banner">
        <video autoplay muted loop playsinline class="banner-video">
            <source src="banner.mp4" type="video/mp4" />
        </video>
    </div>

<div class="dashboard-grid">
        
        <aside class="dashboard-left">
            <h3 style="color:#244b94; border-bottom:2px solid #d90f23; padding-bottom:10px; margin-top:0;">üìÖ Kalend√°r</h3>
            
            <div id="calendarList" class="upcoming-list">
                <p>Naƒç√≠tavam...</p>
            </div>
        </aside>

        <main class="dashboard-center">
            <div class="live-scoreboard-section" style="margin-top:0; padding:0; background:transparent; box-shadow:none;">
                <h2 style="text-align:center; color:#d90f23; margin-top:0;">Live V√Ωsledky</h2>
                <div id="matchList" class="match-container">
                    <p style="text-align:center;">Naƒç√≠tavam z√°pasy...</p>
                </div>
            </div>
        </main>

        <aside class="dashboard-right">
            <a href="standing.html" class="action-btn btn-results">
                üìä V√Ωsledky & Tabuƒæky
            </a>
            <a href="https://www.youtube.com/@HOCKEYTV-LIVE/live" target="_blank" class="action-btn btn-live">
                ‚ñ∂ Sledova≈• Livestream
            </a>
        </aside>

    </div>

<footer class="footer">
        <div class="footer-container">      
            <div class="footer-col">
                <h4 class="footer-title">SAILH</h4>
                <div class="footer-line"></div>
                <p class="footer-text">
                    Slovensk√° asoci√°cia in-line hokeja.<br>
                    Oreganov√° 1178/1<br>
                    900 46 Most pri Bratislave<br>
                    Studen√©
                </p>
                <p class="footer-text" style="margin-top: 15px; font-size: 0.85em; opacity: 0.7;">
                    Registraƒçn√© ƒç√≠slo: VVS/1-900/90-72711
                </p>
            </div>
            <div class="footer-col">
                <h4 class="footer-title">R√Ωchle Odkazy</h4>
                <div class="footer-line"></div>
                <ul class="footer-links">
                    <li><a href="https://ives.minv.sk/rmno/detail/13542098669735168654">O asoci√°cii</a></li>
                    <li><a href="privacy-policy.html">Ochrana √∫dajov</a></li>
                    <li><a href="donate.html">Darujte 2%</a></li>
                </ul>
            </div>
            <div class="footer-col">
                <h4 class="footer-title">Kontakt</h4>
                <div class="footer-line"></div>
                <div class="contact-item">
                    <span class="icon">üìß</span> 
                    <a href="mailto:pejchalr@gmail.com">pejchalr@gmail.com</a>
                </div>
                <div class="contact-item">
                    <span class="icon">üìû</span> 
                    <span>+421 905 627 715</span>
                </div>
                <div class="contact-item" style="margin-top: 20px;">
                    <strong style="color:#d90f23; margin-right:5px;">IƒåO:</strong> 57133671
                </div>
                <div class="contact-item">
                    <strong style="color:#d90f23; margin-right:5px;">DIƒå:</strong> 2122632930
                </div>
            </div>
        </div>
        <div class="footer-bottom">
            ¬© 2026 SAILH - V≈°etky pr√°va vyhraden√©
        </div>
    </footer>

<script>
    const API_BASE = "https://Lucifer21sk.pythonanywhere.com";
async function loadCalendar() {
            try {
                const res = await fetch(`${API_BASE}/matches/upcoming`);
                const matches = await res.json();
                const box = document.getElementById("calendarList");
                
                if (matches.length === 0) {
                    box.innerHTML = "<p style='color:#666; font-size:0.9em; padding:10px;'>≈Ωiadne napl√°novan√© z√°pasy.</p>";
                    return;
                }

                box.innerHTML = "";
                matches.forEach(m => {
                    // Injecting the new "Date Box" layout
                    box.innerHTML += `
                        <div class="upcoming-item">
                            
                            <div class="calendar-date-box">
                                <span class="c-date">${m.date}</span>
                                <span class="c-time">${m.time}</span>
                            </div>

                            <div class="calendar-teams">
                                <div>${m.home_team}</div>
                                <span class="vs-divider">vs</span>
                                <div>${m.away_team}</div>
                            </div>
                        </div>
                    `;
                });
            } catch(e) {
                console.error(e);
            }
        }
        async function loadMatches() {
            try {
                const response = await fetch("https://Lucifer21sk.pythonanywhere.com/matches/public");
                let matches = await response.json();

                matches = matches.filter(m => m.status === "live");

                const container = document.getElementById("matchList");
                container.innerHTML = ""; 

                if (matches.length === 0) {
                    container.innerHTML = "<p>Aktu√°lne sa nehraj√∫ ≈æiadne z√°pasy.</p>";
                    return;
                }

                matches.forEach(m => {
                    const statusClass = "status-live";
                    const statusText = "NA≈ΩIVO";
                    
                    let phaseText = m.phase;
                    if(phaseText === "normal") phaseText = "Z√°kladn√° hracia doba";
                    if(phaseText === "overtime") phaseText = "Predƒ∫≈æenie";
                    if(phaseText === "shootout") phaseText = "N√°jazdy";

                    // --- TIMELINE (Names Only) ---
                    let eventsHtml = "";
                    if (m.events && m.events.length > 0) {
                        eventsHtml = '<div style="margin-top: 20px; border-top: 1px solid #ddd; padding-top: 10px; display: flex; flex-direction: column; gap: 8px;">';
                        
                        m.events.forEach(e => {
                            let alignStyle = "";
                            let boxStyle = "padding: 6px 12px; border-radius: 6px; font-weight: bold; font-size: 0.95em; display: inline-block; max-width: 80%; box-shadow: 0 1px 2px rgba(0,0,0,0.1);";

                            if (e.side === "home") {
                                // Home Goal -> Left -> Blue
                                alignStyle = "align-self: flex-start; text-align: left;";
                                boxStyle += " background-color: #e3f2fd; color: #1565c0; border-left: 4px solid #1565c0;"; 
                            } else {
                                // Away Goal -> Right -> Red
                                alignStyle = "align-self: flex-end; text-align: right;";
                                boxStyle += " background-color: #fce4ec; color: #c2185b; border-right: 4px solid #c2185b;"; 
                            }

                            // Just the Scorer Name
                            eventsHtml += `
                                <div style="${alignStyle}">
                                    <div style="${boxStyle}">
                                        ${e.scorer}
                                    </div>
                                </div>`;
                        });
                        eventsHtml += '</div>';
                    }
                    // -----------------------------

                    container.innerHTML += `
                        <div class="match-card">
                            <div class="status-badge ${statusClass}">${statusText}</div>
                            <div class="scoreboard-display">
                                <div class="team-name" style="text-align: right;">${m.home_team}</div>
                                <div class="score-numbers">${m.home_score} - ${m.away_score}</div>
                                <div class="team-name" style="text-align: left;">${m.away_team}</div>
                            </div>
                            <div class="match-phase">${phaseText}</div>
                            ${eventsHtml}
                        </div>
                    `;
                });

            } catch (err) {
                console.error("Error loading matches:", err);
                document.getElementById("matchList").innerHTML = "<p>Chyba pri naƒç√≠tan√≠ v√Ωsledkov.</p>";
            }
        }

        loadCalendar();
        loadMatches();
        setInterval(loadMatches, 5000); 
    </script>
</body>
</html>