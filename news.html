<!DOCTYPE html>
<html lang="sk">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>SAILH - Novinky</title>
    <link rel="stylesheet" href="styles.css" />
</head>
<body>
    <header class="header">
        <div class="logo">
            <img src="logo_80.png" alt="SAILH Logo" class="logo-img">
        </div>
        <div class="site-title">Slovenská asociácia in-line hokeja</div>
        <nav class="menu">
            <a href="index.html">Domov</a>
            <a href="news.html" class="active">Novinky</a>
            <a href="gallery.html">Galéria</a>
            <a href="clubs.html">Kluby</a>
            <a href="partners.html">Partneri</a>
            <a href="donate.html">Darujte 2%</a>
            <a href="https://www.inlineliga.sk">Amatérska liga</a>
        </nav>
    </header>

    <div class="layout">
        <main class="hero main-content">
            <h1>Novinky</h1>
            <p>Najnovšie informácie z domáceho diania a asociácie.</p>
            </main>

        <aside class="rss-sidebar">
            <div class="rss-box">
                <h3>Svetové novinky</h3>
                <p class="rss-source">Zdroj: MIHWA.org</p>
                <div id="rss-feed-content"></div>
                <div id="rss-error" class="rss-error" style="display:none; color:red;">Chyba pri načítaní RSS.</div>
            </div>
        </aside>
    </div>

    <script>
        async function loadRSS() {
            const url = "https://api.rss2json.com/v1/api.json?rss_url=https://www.mihwa.org/feed/";
            const box = document.getElementById("rss-feed-content");
            const dict = [ [/World/gi, "Svet"], [/Hockey/gi, "Hokej"], [/Inline/gi, "In-line"], [/Team/gi, "Tím"], [/Match/gi, "Zápas"] ];

            try {
                const res = await fetch(url);
                const data = await res.json();
                box.innerHTML = "";

                data.items.slice(0,5).forEach(item => {
                    let title = item.title;
                    dict.forEach(([from,to]) => title = title.replace(from,to));
                    let desc = item.description.replace(/<[^>]*>/g, "").trim();
                    if (desc.length > 140) desc = desc.substring(0,140) + "...";

                    box.innerHTML += `
                    <div class="rss-item" style="padding:10px;background:#fff;border-left:4px solid #d90f23;margin-bottom:10px;border-radius:6px;box-shadow:0 1px 3px rgba(0,0,0,0.1);">
                        <a href="${item.link}" target="_blank" style="font-weight:bold;color:#244b94;text-decoration:none;">${title}</a>
                        <div style="font-size:12px;color:#666;margin-top:4px;">${new Date(item.pubDate).toLocaleDateString("sk-SK")}</div>
                        <p style="font-size:11px; line-height:1.15; color:#555; margin-top:4px;">${desc}</p>
                    </div>`;
                });
            } catch(e) {
                document.getElementById("rss-error").style.display = "block";
            }
        }
        loadRSS();
    </script>
</body>
</html>